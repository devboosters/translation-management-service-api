# Translation Management Service API

A high-performance API for managing translations with support for multiple locales and tags.

## Features

- CRUD operations for translations
- Search by key, value, tag, or locale
- JSON export for frontend applications
- Token-based authentication
- Optimized for performance (<200ms response time)
- Scales to 100k+ records

## Requirements

- PHP ^8.2
- MySQL 5.7+
- Composer
- Apache2

## Installation

1. Clone the repository
2. Run `composer install`
3. Copy `.env.example` to `.env` and configure database settings
4. Run `php artisan migrate`


## Seeding the Database

### Regular Seeding (for development)

This will seed:
1. 1 test API user and 5 more random users
	`php artisan translations:seed --users`

2. 100 translation records 
	`php artisan translations:seed`
3. 100,000 translation records for Performance testing (Optional)
	`php artisan translations:seed --performance`


## Running The Application

The following command can be using to run the application with custom port and this command will return the base_url to be usable in the PostMan environment file and run the application server and allow the API routes n other tests to run

`php artisan serve --port=8003`


## Testing API Users

The system comes with a pre-seeded API test user as well as the register/login functionality for creating and using new user:

After seeding, you can immediately test the API with these credentials through the postman collection which is already available in the repository

**Credentials:**
- Email: `test-api-user@example.com`
- Password: `password`
- API Token: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30`

But one can also use the Postman collection attached in the repo and call the register api end point to create a new test user and then call the login api ( this will log in the user and generate api_token and auto append to the environment variable) and start using other Authenticated Translation API end points afterwards

## API Endpoints

- POST `/api/login` - Authenticate
- GET `/api/translations/{id}` - Get translation
- POST `/api/translations` - Create translation
- PUT `/api/translations/{id}` - Update translation
- DELETE `/api/translations/{id}` - Delete translation
- GET `/api/translations/search` - Search translations
- GET `/api/translations/export` - Export translations as JSON

## Design Choices

- **Database Schema**: Optimized with indexes on frequently queried columns
- **Caching**: Implemented for export endpoint to improve performance
- **SOLID Principles**: Separated concerns with Repository and Service layers
- **Performance**: Batch processing for large datasets, optimized queries
- **Testing**: Comprehensive test coverage with performance benchmarks

## OpenAPI/Swagger Documentation

Swagger documentation can be generated by the following command if needed

`php artisan l5-swagger:generate`

But as the Swagger documentation is already generated and can be reviewed using the following route

`{{base_url}}/api/documentation`

After that API Docs (json) can be extracted by visitng the following url/api end point

`{{base_url}}/docs?api-docs.json`

Note : Other swagger package's routes are also available to use

## Testing

Run tests with:

`php artisan test`

## About Dockerization

- I have configured and tested out the application through ubuntu virtual host but as far as the dockerization is concerned, I have created all the required 
  files and configuration which were required for the application to be dockerized.
- The unfortunate thing here is I couldn't test out my dockerized implementation because a number of ubuntu packages were creating conflicts on my ubuntu machine and docker setup wasn't getting installed and configured properly so instead of spending much time, I created and placed the required files in the repo that were typically needed for an application to be dockerized 


## Miscellaneous

- **PHP_CodeSniffer**: 

Ran the following commands and fix all the PSR-12 coding standards issues in multiple directories
	` ./vendor/bin/phpcs --standard=PSR12 app/`
	` ./vendor/bin/phpcs --standard=PSR12 routes/`
	` ./vendor/bin/phpcs --standard=PSR12 database/`

- **PostMan Environment & Collection**: 

PostMan environment and API collection are available at the root of the same repository with the following names.

- EnvironmentForTranslationManagementServiceAPI.postman_environment.json
- TranslationManagementServiceAPI.postman_collection.json

These files are needed to be imported before using API calls

